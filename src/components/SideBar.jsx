import { useState, useContext } from "react";
import { Link, NavLink } from "react-router-dom";

import AuthContext from "../context/AuthContext";
import { ADMIN_PERMISSIONS, EMPLOYEE_PERMISSIONS } from "../utils/Constants";

const tabs = [
  {
    icon: (isActive) => (
      <svg
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M12.4722 6.41794L12.471 6.41673C12.2218 6.16801 12.1111 5.89904 12.1111 5.55555V2.22222C12.1111 1.87869 12.2219 1.60902 12.4716 1.35933C12.7201 1.11074 12.9893 1 13.3333 1H17.7778C18.1215 1 18.3912 1.11059 18.6406 1.35924C18.8894 1.60866 19 1.87837 19 2.22222V5.55555C19 5.89959 18.8893 6.16874 18.6407 6.41734C18.391 6.66703 18.1213 6.77778 17.7778 6.77778H13.3333C12.9898 6.77778 12.7209 6.66709 12.4722 6.41794ZM2.22222 19C1.87836 19 1.60864 18.8893 1.35921 18.6405C1.11057 18.3912 1 18.1215 1 17.7778V2.22222C1 1.87841 1.11061 1.60872 1.35933 1.35933C1.60872 1.11061 1.87841 1 2.22222 1H6.66667C7.01049 1 7.2802 1.11063 7.5296 1.35937C7.77829 1.60876 7.88889 1.87843 7.88889 2.22222V17.7778C7.88889 18.1216 7.77828 18.3913 7.52956 18.6407C7.28016 18.8894 7.01047 19 6.66667 19H2.22222ZM13.3333 19C12.9893 19 12.7201 18.8893 12.4716 18.6407C12.2219 18.391 12.1111 18.1213 12.1111 17.7778V12.2222C12.1111 11.8787 12.2219 11.609 12.4716 11.3593C12.7201 11.1107 12.9893 11 13.3333 11H17.7778C18.1215 11 18.3912 11.1106 18.6405 11.3592C18.8893 11.6086 19 11.8783 19 12.2222V17.7778C19 18.1216 18.8894 18.3913 18.6407 18.6407C18.3913 18.8894 18.1216 19 17.7778 19H13.3333Z"
          stroke={isActive ? "#FFF" : "#a93f15"}
          stroke-width="2"
        />
      </svg>
    ),
    path: "/admin/dashboard",
    title: "Dashboard",
    permission: "DASHBOARD",
  },
  {
    icon: (isActive) => (
      <svg
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M13.1251 8.75V5C13.1251 4.1712 12.7959 3.37634 12.2098 2.79029C11.6238 2.20424 10.8289 1.875 10.0001 1.875C9.17131 1.875 8.37645 2.20424 7.7904 2.79029C7.20435 3.37634 6.87511 4.1712 6.87511 5V8.75M16.3384 7.08917L17.3909 17.0892C17.4493 17.6433 17.0159 18.125 16.4584 18.125H3.54178C3.41028 18.1251 3.28023 18.0976 3.16007 18.0442C3.0399 17.9908 2.93232 17.9127 2.8443 17.8151C2.75627 17.7174 2.68979 17.6023 2.64915 17.4772C2.60852 17.3521 2.59465 17.2199 2.60844 17.0892L3.66178 7.08917C3.68607 6.8588 3.7948 6.64558 3.96698 6.49063C4.13917 6.33568 4.36263 6.24996 4.59428 6.25H15.4059C15.8859 6.25 16.2884 6.6125 16.3384 7.08917ZM7.18761 8.75C7.18761 8.83288 7.15469 8.91237 7.09608 8.97097C7.03748 9.02958 6.95799 9.0625 6.87511 9.0625C6.79223 9.0625 6.71274 9.02958 6.65414 8.97097C6.59553 8.91237 6.56261 8.83288 6.56261 8.75C6.56261 8.66712 6.59553 8.58763 6.65414 8.52903C6.71274 8.47042 6.79223 8.4375 6.87511 8.4375C6.95799 8.4375 7.03748 8.47042 7.09608 8.52903C7.15469 8.58763 7.18761 8.66712 7.18761 8.75ZM13.4376 8.75C13.4376 8.83288 13.4047 8.91237 13.3461 8.97097C13.2875 9.02958 13.208 9.0625 13.1251 9.0625C13.0422 9.0625 12.9627 9.02958 12.9041 8.97097C12.8455 8.91237 12.8126 8.83288 12.8126 8.75C12.8126 8.66712 12.8455 8.58763 12.9041 8.52903C12.9627 8.47042 13.0422 8.4375 13.1251 8.4375C13.208 8.4375 13.2875 8.47042 13.3461 8.52903C13.4047 8.58763 13.4376 8.66712 13.4376 8.75Z"
          stroke={isActive ? "#FFF" : "#a93f15"}
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    ),
    path: "/admin/products",
    title: "Sản phẩm",
    permission: "PRODUCTS",
  },
  {
    icon: (isActive) => (
      <svg
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0_369_1269)">
          <path
            d="M5.3575 8.125L1.875 10L5.3575 11.875M5.3575 8.125L10 10.625L14.6425 8.125M5.3575 8.125L1.875 6.25L10 1.875L18.125 6.25L14.6425 8.125M5.3575 11.875L1.875 13.75L10 18.125L18.125 13.75L14.6425 11.875M5.3575 11.875L10 14.375L14.6425 11.875M14.6425 8.125L18.125 10L14.6425 11.875"
            stroke={isActive ? "#FFF" : "#a93f15"}
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </g>
        <defs>
          <clipPath id="clip0_369_1269">
            <rect width="20" height="20" fill="white" />
          </clipPath>
        </defs>
      </svg>
    ),
    path: "/admin/categories",
    title: "Danh mục",
    permission: "CATEGORIES",
  },
  {
    icon: (isActive) => (
      <svg
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M12.5001 15.94C13.2109 16.1464 13.9474 16.2508 14.6876 16.25C15.8779 16.2517 17.0528 15.9803 18.1218 15.4567C18.1534 14.7098 17.9406 13.9729 17.5158 13.3578C17.0909 12.7427 16.4771 12.2828 15.7674 12.0479C15.0576 11.813 14.2907 11.8159 13.5827 12.0562C12.8748 12.2964 12.2645 12.7609 11.8443 13.3792M12.5001 15.94V15.9375C12.5001 15.01 12.2618 14.1375 11.8443 13.3792M12.5001 15.94V16.0283C10.8963 16.9942 9.05894 17.5032 7.18677 17.5C5.24427 17.5 3.42677 16.9625 1.8751 16.0283L1.87427 15.9375C1.87363 14.7579 2.26561 13.6116 2.98842 12.6794C3.71123 11.7472 4.72375 11.082 5.86634 10.7888C7.00894 10.4956 8.21662 10.5911 9.29899 11.0601C10.3814 11.5291 11.2768 12.345 11.8443 13.3792M10.0001 5.3125C10.0001 6.05842 9.70379 6.77379 9.17634 7.30124C8.64889 7.82868 7.93352 8.125 7.1876 8.125C6.44168 8.125 5.72631 7.82868 5.19886 7.30124C4.67142 6.77379 4.3751 6.05842 4.3751 5.3125C4.3751 4.56658 4.67142 3.85121 5.19886 3.32376C5.72631 2.79632 6.44168 2.5 7.1876 2.5C7.93352 2.5 8.64889 2.79632 9.17634 3.32376C9.70379 3.85121 10.0001 4.56658 10.0001 5.3125ZM16.8751 7.1875C16.8751 7.76766 16.6446 8.32406 16.2344 8.7343C15.8242 9.14453 15.2678 9.375 14.6876 9.375C14.1074 9.375 13.551 9.14453 13.1408 8.7343C12.7306 8.32406 12.5001 7.76766 12.5001 7.1875C12.5001 6.60734 12.7306 6.05094 13.1408 5.6407C13.551 5.23047 14.1074 5 14.6876 5C15.2678 5 15.8242 5.23047 16.2344 5.6407C16.6446 6.05094 16.8751 6.60734 16.8751 7.1875Z"
          stroke={isActive ? "#FFF" : "#a93f15"}
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    ),
    path: "/admin/users",
    title: "Người dùng",
    permission: "USERS",
  },
  {
    icon: (isActive) => (
      <svg
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M2.5 10.9375C2.5 10.42 2.92 10 3.4375 10H5.3125C5.83 10 6.25 10.42 6.25 10.9375V16.5625C6.25 17.08 5.83 17.5 5.3125 17.5H3.4375C3.18886 17.5 2.9504 17.4012 2.77459 17.2254C2.59877 17.0496 2.5 16.8111 2.5 16.5625V10.9375ZM8.125 7.1875C8.125 6.67 8.545 6.25 9.0625 6.25H10.9375C11.455 6.25 11.875 6.67 11.875 7.1875V16.5625C11.875 17.08 11.455 17.5 10.9375 17.5H9.0625C8.81386 17.5 8.5754 17.4012 8.39959 17.2254C8.22377 17.0496 8.125 16.8111 8.125 16.5625V7.1875ZM13.75 3.4375C13.75 2.92 14.17 2.5 14.6875 2.5H16.5625C17.08 2.5 17.5 2.92 17.5 3.4375V16.5625C17.5 17.08 17.08 17.5 16.5625 17.5H14.6875C14.4389 17.5 14.2004 17.4012 14.0246 17.2254C13.8488 17.0496 13.75 16.8111 13.75 16.5625V3.4375Z"
          stroke={isActive ? "#FFF" : "#a93f15"}
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    ),
    path: "/admin/report",
    title: "Báo cáo",
    permission: "REPORT",
  },

  {
    icon: (isActive) => (
      <svg
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M3.125 10H16.875M3.125 13.125H16.875M3.125 16.25H16.875M4.6875 3.75H15.3125C15.7269 3.75 16.1243 3.91462 16.4174 4.20765C16.7104 4.50067 16.875 4.8981 16.875 5.3125C16.875 5.7269 16.7104 6.12433 16.4174 6.41735C16.1243 6.71038 15.7269 6.875 15.3125 6.875H4.6875C4.2731 6.875 3.87567 6.71038 3.58265 6.41735C3.28962 6.12433 3.125 5.7269 3.125 5.3125C3.125 4.8981 3.28962 4.50067 3.58265 4.20765C3.87567 3.91462 4.2731 3.75 4.6875 3.75Z"
          stroke={isActive ? "#FFF" : "#a93f15"}
          stroke-width="1.66667"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    ),
    path: "/admin/orders",
    title: "Đơn hàng",
    permission: "ORDERS",
  },
  {
    icon: (isActive) => (
      <svg
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M9.56664 2.91581C9.60189 2.82983 9.66191 2.75629 9.73907 2.70452C9.81624 2.65276 9.90706 2.62512 9.99997 2.62512C10.0929 2.62512 10.1837 2.65276 10.2609 2.70452C10.338 2.75629 10.3981 2.82983 10.4333 2.91581L12.2041 7.17498C12.2373 7.25467 12.2918 7.32368 12.3616 7.3744C12.4315 7.42513 12.5139 7.4556 12.6 7.46248L17.1983 7.83081C17.6141 7.86414 17.7825 8.38331 17.4658 8.65414L13.9625 11.6558C13.897 11.7118 13.8482 11.7847 13.8215 11.8666C13.7947 11.9485 13.791 12.0361 13.8108 12.12L14.8816 16.6075C14.9032 16.6975 14.8975 16.7919 14.8654 16.8787C14.8333 16.9656 14.7762 17.0409 14.7013 17.0953C14.6264 17.1497 14.5371 17.1807 14.4446 17.1843C14.3521 17.188 14.2606 17.1641 14.1816 17.1158L10.2441 14.7116C10.1706 14.6667 10.0861 14.643 9.99997 14.643C9.91382 14.643 9.82933 14.6667 9.75581 14.7116L5.81831 17.1166C5.73935 17.165 5.64785 17.1888 5.55535 17.1852C5.46286 17.1815 5.37352 17.1505 5.29861 17.0962C5.22371 17.0418 5.16661 16.9664 5.13452 16.8796C5.10243 16.7927 5.09678 16.6983 5.11831 16.6083L6.18914 12.12C6.209 12.0361 6.20535 11.9485 6.17859 11.8666C6.15183 11.7847 6.103 11.7117 6.03747 11.6558L2.53414 8.65414C2.46359 8.594 2.41248 8.51428 2.38727 8.42507C2.36207 8.33586 2.3639 8.24118 2.39255 8.15302C2.42119 8.06485 2.47536 7.98717 2.54818 7.92981C2.62101 7.87245 2.70922 7.838 2.80164 7.83081L7.39997 7.46248C7.48601 7.4556 7.56849 7.42513 7.63833 7.3744C7.70817 7.32368 7.76266 7.25467 7.79581 7.17498L9.56664 2.91581Z"
          stroke={isActive ? "#FFF" : "#a93f15"}
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    ),
    path: "/admin/reviews",
    title: "Đánh giá",
    permission: "REVIEWS",
  },
  {
    icon: (isActive) => (
      <svg
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M18.1092 1.89082C17.699 1.48066 17.1426 1.25024 16.5625 1.25024C15.9824 1.25024 15.4261 1.48066 15.0159 1.89082L14.0517 2.85499L17.145 5.94832L18.1092 4.98415C18.5194 4.57393 18.7498 4.01758 18.7498 3.43749C18.7498 2.85739 18.5194 2.30104 18.1092 1.89082ZM16.2609 6.83249L13.1675 3.73915L6.16753 10.7392C5.65324 11.2532 5.27518 11.8873 5.06753 12.5842L4.40086 14.8217C4.36868 14.9296 4.36628 15.0443 4.39391 15.1535C4.42155 15.2627 4.47821 15.3625 4.55787 15.4421C4.63754 15.5218 4.73727 15.5785 4.84649 15.6061C4.95572 15.6337 5.07039 15.6313 5.17836 15.5992L7.41586 14.9325C8.11272 14.7248 8.74683 14.3468 9.26086 13.8325L16.2609 6.83249Z"
          fill={isActive ? "#FFF" : "#a93f15"}
        />
        <path
          d="M4.375 4.375C3.71196 4.375 3.07607 4.63839 2.60723 5.10723C2.13839 5.57607 1.875 6.21196 1.875 6.875V15.625C1.875 16.288 2.13839 16.9239 2.60723 17.3928C3.07607 17.8616 3.71196 18.125 4.375 18.125H13.125C13.788 18.125 14.4239 17.8616 14.8928 17.3928C15.3616 16.9239 15.625 16.288 15.625 15.625V11.25C15.625 11.0842 15.5592 10.9253 15.4419 10.8081C15.3247 10.6908 15.1658 10.625 15 10.625C14.8342 10.625 14.6753 10.6908 14.5581 10.8081C14.4408 10.9253 14.375 11.0842 14.375 11.25V15.625C14.375 15.9565 14.2433 16.2745 14.0089 16.5089C13.7745 16.7433 13.4565 16.875 13.125 16.875H4.375C4.04348 16.875 3.72554 16.7433 3.49112 16.5089C3.2567 16.2745 3.125 15.9565 3.125 15.625V6.875C3.125 6.54348 3.2567 6.22554 3.49112 5.99112C3.72554 5.7567 4.04348 5.625 4.375 5.625H8.75C8.91576 5.625 9.07473 5.55915 9.19194 5.44194C9.30915 5.32473 9.375 5.16576 9.375 5C9.375 4.83424 9.30915 4.67527 9.19194 4.55806C9.07473 4.44085 8.91576 4.375 8.75 4.375H4.375Z"
          fill={isActive ? "#FFF" : "#a93f15"}
        />
      </svg>
    ),
    path: "/admin/account",
    title: "Tài khoản",
    permission: "ADMIN_ACCOUNT",
  },
];

export default function SideBar({ userRole }) {
  const { logout } = useContext(AuthContext);

  return (
    <div className="flex flex-col w-2/12 bg-white h-screen pl-10 pt-10 justify-between overflow-y-auto">
      <div>
        <div className="flex flex-row gap-x-2 items-center mb-10">
          <svg
            width="37"
            height="40"
            viewBox="0 0 37 48"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M8.62973 44.1691L5.66504 22.8233C5.66504 22.8233 7.44385 25.1948 11.2979 25.343C15.152 25.4913 21.0961 19.2782 24.0461 20.4516L20.4885 44.1691H8.62973Z"
              fill="#A93F15"
            />
            <path
              d="M29.0723 16.7518L24.4775 46.992L24.3242 47.9998H4.63574L4.49121 46.9803L0.192383 16.741L0 15.3885H20.1201C20.3607 16.2587 20.7604 17.0596 21.2861 17.7596H2.73242L6.69434 45.6278H22.2861L26.0898 20.5916L28.0439 21.0672L28.5342 19.0506L26.4023 18.5321L26.5205 17.7596H24.3066C23.4137 17.2028 22.7091 16.3767 22.3076 15.3885H29.2803L29.0723 16.7518Z"
              fill="#0A0A0A"
            />
            <path
              d="M25.6762 1.63281L24.6439 10.5732C24.5598 11.3031 25.0814 11.9637 25.8109 12.0508C26.5442 12.1382 27.2092 11.6134 27.2943 10.8799L28.3295 1.94922L31.0131 2.26855L29.9809 11.1904C29.8963 11.9206 30.418 12.5819 31.1479 12.6689C31.8812 12.7564 32.5462 12.2316 32.6313 11.498L33.6635 2.58594L34.977 2.74121L36.2914 2.89844L34.9662 14.0049C34.5686 17.3378 31.5443 19.7179 28.2113 19.3203L27.0346 19.1797C23.7017 18.7821 21.3216 15.7577 21.7191 12.4248L23.0443 1.31836L25.6762 1.63281ZM35.1654 1.18848C35.9032 1.27645 36.4243 1.95387 36.3197 2.68945L36.2904 2.89746L33.6635 2.58496L33.6947 2.33594C33.7865 1.61452 34.4433 1.10241 35.1654 1.18848ZM29.8344 0.598632L29.8627 0.601562C30.5804 0.687143 31.0998 1.3291 31.0336 2.04883L31.0131 2.26855L28.3305 1.94922L28.351 1.77148C28.4351 1.03708 29.1004 0.511107 29.8344 0.598632ZM28.3305 1.94824L28.3295 1.94922L25.6762 1.63281L25.6771 1.63184L28.3305 1.94824ZM24.5307 0.00976525C25.2454 0.0950276 25.7617 0.734625 25.6938 1.45117L25.6762 1.63184L23.0443 1.31738L23.0521 1.21582C23.1145 0.467717 23.7852 -0.0791227 24.5307 0.00976525Z"
              fill="#0A0A0A"
            />
            <path
              d="M23.3047 46.8142L27.9 16.5743"
              stroke="#0A0A0A"
              stroke-width="2.37175"
            />
            <circle cx="12.1872" cy="29.9383" r="1.63058" fill="white" />
            <circle cx="16.0415" cy="35.5713" r="1.03764" fill="white" />
            <circle cx="14.4113" cy="40.4629" r="0.592938" fill="white" />
          </svg>

          <span className="font-bold text-xl tracking-wide">FoodyRush</span>
        </div>
        <div className="flex flex-col gap-y-1">
          {tabs.map((tab, index) => {
            const hasPermission = (userRole) => {
              if (userRole === "Admin") {
                return ADMIN_PERMISSIONS.includes(tab.permission);
              } else if (userRole === "Employee") {
                return EMPLOYEE_PERMISSIONS.includes(tab.permission);
              }
              return false;
            };

            return hasPermission(userRole) ? (
              <NavLink
                to={tab.path}
                key={index}
                className={({ isActive }) =>
                  `p-3 rounded-xl w-40 ${
                    isActive ? `bg-[#a93f15]` : `bg-white`
                  }`
                }
              >
                {({ isActive }) => (
                  <div className="flex flex-row gap-x-2">
                    {tab.icon(isActive)}
                    <p
                      className={`font-manrope font-bold ${
                        isActive ? `text-white` : `text-[#a93f15]`
                      }`}
                    >
                      {tab.title}
                    </p>
                  </div>
                )}
              </NavLink>
            ) : null;
          })}
        </div>
      </div>
      <button className="flex flex-row gap-x-2 mb-2" onClick={logout}>
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M14.0256 14.75C13.817 14.5093 13.7127 14.2359 13.7127 13.93C13.7127 13.6248 13.817 13.3704 14.0256 13.1667L16.1309 11.1111H7.96586C7.64343 11.1111 7.37335 11.0044 7.15562 10.7911C6.93713 10.5785 6.82788 10.3148 6.82788 10C6.82788 9.68519 6.93713 9.42111 7.15562 9.20778C7.37335 8.99518 7.64343 8.88889 7.96586 8.88889H16.1309L14.0256 6.83333C13.798 6.61111 13.6842 6.34741 13.6842 6.04222C13.6842 5.7363 13.798 5.47222 14.0256 5.25C14.2342 5.02778 14.4952 4.91667 14.8085 4.91667C15.1211 4.91667 15.3817 5.01852 15.5903 5.22222L19.6871 9.22222C19.8008 9.33333 19.8816 9.4537 19.9294 9.58333C19.9765 9.71296 20 9.85185 20 10C20 10.1481 19.9765 10.287 19.9294 10.4167C19.8816 10.5463 19.8008 10.6667 19.6871 10.7778L15.5903 14.7778C15.3438 15.0185 15.0737 15.1248 14.7801 15.0967C14.4857 15.0693 14.2342 14.9537 14.0256 14.75ZM2.27596 20C1.65007 20 1.11408 19.7826 0.667994 19.3478C0.222665 18.9122 0 18.3889 0 17.7778V2.22222C0 1.61111 0.222665 1.08778 0.667994 0.652222C1.11408 0.217407 1.65007 0 2.27596 0H9.10384C9.42627 0 9.69673 0.106296 9.91522 0.318889C10.133 0.532222 10.2418 0.796296 10.2418 1.11111C10.2418 1.42593 10.133 1.68963 9.91522 1.90222C9.69673 2.11556 9.42627 2.22222 9.10384 2.22222H2.27596V17.7778H9.10384C9.42627 17.7778 9.69673 17.8844 9.91522 18.0978C10.133 18.3104 10.2418 18.5741 10.2418 18.8889C10.2418 19.2037 10.133 19.4674 9.91522 19.68C9.69673 19.8933 9.42627 20 9.10384 20H2.27596Z"
            fill="#a93f15"
          />
        </svg>
        <p className="font-manrope font-bold text-[#a93f15] mb-2">Đăng xuất</p>
      </button>
    </div>
  );
}
